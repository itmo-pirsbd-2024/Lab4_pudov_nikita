# Lab 4 WebSocketServer

В данной лабораторной работе был разработан прототип веб-сокет сервера для последующей курсовой работы по анализу
криптовалютных котировок

На данном примере рассматривается веб-сокет сервер, который будет потреблять данные из топика kafka и осуществлять
рассылку данных подключенным к серверу клиентам. Для написания использовался Spring Boot.

В качестве примерного формата данных, поступающих из Kafka был создан класс
CryptoAggregatedData с тремя полями: symbol - наименование котировок (также он будет являться ключом в Kafka),
event_time (время события) и average_price (средняя цена за определенный период, период будем выбирать на этапе
потоковой обработке в курсовой работе)


Класс WebSocketConfig описывает непосредственно endpoints. Клиенты подключаются к серверу по endpoint /crypto.
Также мы конфигурируем брокер сообщений в WebSocket сервере и определяем /topic. Все клиенты подписанные по пути
/topic/... получают сообщения из этого топика от сервера. Если же клиенты будут отправлять запросы серверу, то их запросы
будут начинаться с /app. Подробные комментарии представлены в исходном коде.

Класс WebSocket controller определяет механизм отображения будущего интерфейса приложения с использованием Spring UI model.
Отмечу, что здесь используется шаблонизатор thymeleaf и наш UI интерфейс, например из HTML файла будет браться из папки
resources/templates с названием, которое задано в GetMapping нашего WebSocketController.

Класс kafkaConsumer Service как раз определяет наш WebSocket сервер в качестве потребителя топика kafka 
crypto_data_aggregated, где мы предполагаем, что будут лежать наши агрегированные обработанные данные. В данном классе
определяется endpoint "/topic/updates". Клиенты, которые будут подписаны на данный топик WebSocket сервера будут 
получать актуальные данные.

Также были заданы настройки логирования в resources/log4j2.properties

В дальнейшем в курсовой работе уже будут определены механизмы взаимодействия с топиками Kafka, источник поступающих данных
и процесс их потоковой обработки.

